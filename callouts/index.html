<html>
  <head>
    <title>Callouts Demo - Mirage</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.0.0/annyang.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-alpha1/jquery.js"></script>
    <script>
    var calloutWords = {
      //fire box
      'fire box':'fire box',
      'firebox': 'fire box',
      'firefox': 'fire box',
      'PO Box': 'fire box',

      //van
      'van':'van',
      'man':'van',

      'kitchen': 'kitchen',
      'cat': 'cat',
      'bat': 'cat',
      'catwalk': 'catwalk',
      'window': 'window',

      //apts
      'apts': 'apts',
      'apps': 'apts',
      'apartments': 'apartments',

      //bench
      'bench': 'bench',

      //site
      'site': 'site',
      'sight': 'site',
      'side': 'site',

      'jungle': 'jungle',
      'connector': 'connector',

      //ct
      'CT': 'CT',
      'c t': 'CT',
      'CeCe': 'CT',
      'pt': 'CT',
      'pity': 'CT',

      //stairs
      'stairs': 'stairs',
      'stair': 'stairs',
      'stay': 'stairs',

      //ticket booth
      'ticket': 'ticket booth',
      'booth': 'ticket booth',
      'birds': 'ticket booth',
      'ticket booth': 'ticket booth',

      //palace
      'alice': 'palace',
      'pallets': 'palace',
      'palace': 'palace',

      'under alice': 'under palace',
      'under pallets': 'under pallets',
      'under palace': 'under palace',

      //tetris
      'tetris': 'tetris',
      'texas': 'tetris',

      //sandwich
      'sandwich': 'sandwich',

      //t ramp
      't ramp': 't ramp',

      //ramp
      'ramp': 'ramp',
      'ram': 'ramp',
      'rack': 'ramp',
      'rat': 'ramp',

      //t spawn
      'spawn': 'spawn',
      't spawn': 't spawn',
      'teaspoon': 't spawn',

      //mid
      'mid': 'mid',
      'min': 'mid',
      'made': 'mid',
      'maid': 'mid',
      'middle': 'middle',

      //cart
      'cart': 'cart',
      'cup': 'cup',

      //underpass
      'underpass': 'underpass',
      'on the buss': 'underpass',
      'on the prize': 'underpass',
      'undercup': 'underpass',
      'under': 'underpass',

      //ladder room
      'ladder': 'ladder room',
      'letter': 'ladder room',
      'letter room': 'letter room',
      'ladder room': 'ladder room',

      //vent
      'vent': 'vent',

      //stove
      'stove': 'stove',

      //pillars
      'pillars': 'pillars',

      //tri box
      'tri box': 'tri box',
      'triple': 'triple',
      'tribox': 'tri box',
      'tribal': 'tri box',
      'topics': 'tri box',
      'trial ox': 'tri box',
      'trucks': 'tri box',

      //default
      'default': 'default',
      'de fault': 'default',
      'defaults': 'default',
      'depot': 'default',

      //palm
      'palm': 'palm tree',
      'palm tree': 'palm tree',
      'top free': 'palm tree',
      'country': 'palm tree',
      'pound tree': 'palm tree',

      //box
      //boxes
      'box': 'box',
      'bucks': 'box', //todo: change this to box
      'ounce': 'box',
      'boxes': 'boxes',
      'boxers': 'boxes',

      //market
      'market': 'market'
    }
    function callout(text) {
      text = text.replace(/undefined /i, '');
      $('ul').append("<li>"+text+"</li>")
    }

    function ct(term) {
      if (typeof(term) === 'undefined') {
        return "";
      }

      term = term.trim();
      //todo: term includes intead of term ===
      if (term === "o" || term === "old" || term === "when" || term === "fun") {
        return "all";
      }

      //one
      if (term === "what") {
        return "one";
      }

      //two
      if (term === "to" || term === "too") {
        return "two";
      }

      //fire box
      if (term === "bucks" || term == "Oakes" || term =="hours") {
        return "fire box";
      }

      //van
      if (term === "man") {
        return "van";
      }

      //apts
      if (term === "apps") {
        return "apts";
      }

      //bench and...
      if (term === "tension") {
        return "bench and"
      }

      //ebox
      if (term === "")

      //site
      if (term === "side" || term === "sight") {
        return "site";
      }

      //todo: fiter through "Approved words";
      return term
    }

    function approvedWords(term) {
      //the speech recognition comes back jumbled, with worrds we would never say, we need to re-arrange these.
      //this funciton will get the words and translate them from mumbo jumbo into real words! omg!

    }

    if (annyang) {
      var commands = {};

      Object.keys(calloutWords).forEach(function(key) {
        //use the forEach method to ensure closure.
        commands[key] = function(t) { callout(ct(t) + ' ' + calloutWords[key] )}
      });

      // Add our commands to annyang
      annyang.addCommands(commands);
      annyang.debug(true);
      // Start listening.
      annyang.start();
      console.log('annyang started');
    }
    </script>
    <body>
      <h1>Bark Callouts Demo</h1>
      <p>
        This is a demo of Bark Callouts (Alpha) on Mirage. Use the map below as a guide for your callouts and try calling out.
      </p>
      <p>
        Bark callouts is an Idea for CS GO that callouts can be yelled on the mic and displayed in any language.
      </p>
      <ul id="callouts">
      </ul>
      <img src="/img/csgo/de_mirage.jpg"/>
    </body>
  </head>
